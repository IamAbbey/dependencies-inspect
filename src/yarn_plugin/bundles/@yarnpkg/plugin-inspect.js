/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-inspect",
factory: function (require) {
var plugin=(()=>{var Rt=Object.create;var je=Object.defineProperty;var Tt=Object.getOwnPropertyDescriptor;var Nt=Object.getOwnPropertyNames;var Ct=Object.getPrototypeOf,Lt=Object.prototype.hasOwnProperty;var P=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,n)=>(typeof require<"u"?require:r)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var g=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Mt=(e,r)=>{for(var n in r)je(e,n,{get:r[n],enumerable:!0})},br=(e,r,n,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of Nt(r))!Lt.call(e,i)&&i!==n&&je(e,i,{get:()=>r[i],enumerable:!(t=Tt(r,i))||t.enumerable});return e};var He=(e,r,n)=>(n=e!=null?Rt(Ct(e)):{},br(r||!e||!e.__esModule?je(n,"default",{value:e,enumerable:!0}):n,e)),Ut=e=>br(je({},"__esModule",{value:!0}),e);var T=g(tr=>{"use strict";tr.fromCallback=function(e){return Object.defineProperty(function(...r){if(typeof r[r.length-1]=="function")e.apply(this,r);else return new Promise((n,t)=>{r.push((i,s)=>i!=null?t(i):n(s)),e.apply(this,r)})},"name",{value:e.name})};tr.fromPromise=function(e){return Object.defineProperty(function(...r){let n=r[r.length-1];if(typeof n!="function")return e.apply(this,r);r.pop(),e.apply(this,r).then(t=>n(null,t),n)},"name",{value:e.name})}});var _r=g((mu,Dr)=>{var se=P("constants"),Qt=process.cwd,Ne=null,ei=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Ne||(Ne=Qt.call(process)),Ne};try{process.cwd()}catch{}typeof process.chdir=="function"&&(ir=process.chdir,process.chdir=function(e){Ne=null,ir.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ir));var ir;Dr.exports=ri;function ri(e){se.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&r(e),e.lutimes||n(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=t(e.chmod),e.fchmod=t(e.fchmod),e.lchmod=t(e.lchmod),e.chownSync=u(e.chownSync),e.fchownSync=u(e.fchownSync),e.lchownSync=u(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=l(e.statSync),e.fstatSync=l(e.fstatSync),e.lstatSync=l(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(o,p,y){y&&process.nextTick(y)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(o,p,y,a){a&&process.nextTick(a)},e.lchownSync=function(){}),ei==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(o){function p(y,a,f){var m=Date.now(),d=0;o(y,a,function k(I){if(I&&(I.code==="EACCES"||I.code==="EPERM"||I.code==="EBUSY")&&Date.now()-m<6e4){setTimeout(function(){e.stat(a,function(j,W){j&&j.code==="ENOENT"?o(y,a,k):f(I)})},d),d<100&&(d+=10);return}f&&f(I)})}return Object.setPrototypeOf&&Object.setPrototypeOf(p,o),p}(e.rename)),e.read=typeof e.read!="function"?e.read:function(o){function p(y,a,f,m,d,k){var I;if(k&&typeof k=="function"){var j=0;I=function(W,C,le){if(W&&W.code==="EAGAIN"&&j<10)return j++,o.call(e,y,a,f,m,d,I);k.apply(this,arguments)}}return o.call(e,y,a,f,m,d,I)}return Object.setPrototypeOf&&Object.setPrototypeOf(p,o),p}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(o){return function(p,y,a,f,m){for(var d=0;;)try{return o.call(e,p,y,a,f,m)}catch(k){if(k.code==="EAGAIN"&&d<10){d++;continue}throw k}}}(e.readSync);function r(o){o.lchmod=function(p,y,a){o.open(p,se.O_WRONLY|se.O_SYMLINK,y,function(f,m){if(f){a&&a(f);return}o.fchmod(m,y,function(d){o.close(m,function(k){a&&a(d||k)})})})},o.lchmodSync=function(p,y){var a=o.openSync(p,se.O_WRONLY|se.O_SYMLINK,y),f=!0,m;try{m=o.fchmodSync(a,y),f=!1}finally{if(f)try{o.closeSync(a)}catch{}else o.closeSync(a)}return m}}function n(o){se.hasOwnProperty("O_SYMLINK")&&o.futimes?(o.lutimes=function(p,y,a,f){o.open(p,se.O_SYMLINK,function(m,d){if(m){f&&f(m);return}o.futimes(d,y,a,function(k){o.close(d,function(I){f&&f(k||I)})})})},o.lutimesSync=function(p,y,a){var f=o.openSync(p,se.O_SYMLINK),m,d=!0;try{m=o.futimesSync(f,y,a),d=!1}finally{if(d)try{o.closeSync(f)}catch{}else o.closeSync(f)}return m}):o.futimes&&(o.lutimes=function(p,y,a,f){f&&process.nextTick(f)},o.lutimesSync=function(){})}function t(o){return o&&function(p,y,a){return o.call(e,p,y,function(f){h(f)&&(f=null),a&&a.apply(this,arguments)})}}function i(o){return o&&function(p,y){try{return o.call(e,p,y)}catch(a){if(!h(a))throw a}}}function s(o){return o&&function(p,y,a,f){return o.call(e,p,y,a,function(m){h(m)&&(m=null),f&&f.apply(this,arguments)})}}function u(o){return o&&function(p,y,a){try{return o.call(e,p,y,a)}catch(f){if(!h(f))throw f}}}function c(o){return o&&function(p,y,a){typeof y=="function"&&(a=y,y=null);function f(m,d){d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),a&&a.apply(this,arguments)}return y?o.call(e,p,y,f):o.call(e,p,f)}}function l(o){return o&&function(p,y){var a=y?o.call(e,p,y):o.call(e,p);return a&&(a.uid<0&&(a.uid+=4294967296),a.gid<0&&(a.gid+=4294967296)),a}}function h(o){if(!o||o.code==="ENOSYS")return!0;var p=!process.getuid||process.getuid()!==0;return!!(p&&(o.code==="EINVAL"||o.code==="EPERM"))}}});var Ar=g((du,Pr)=>{var Ir=P("stream").Stream;Pr.exports=ni;function ni(e){return{ReadStream:r,WriteStream:n};function r(t,i){if(!(this instanceof r))return new r(t,i);Ir.call(this);var s=this;this.path=t,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var u=Object.keys(i),c=0,l=u.length;c<l;c++){var h=u[c];this[h]=i[h]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}e.open(this.path,this.flags,this.mode,function(o,p){if(o){s.emit("error",o),s.readable=!1;return}s.fd=p,s.emit("open",p),s._read()})}function n(t,i){if(!(this instanceof n))return new n(t,i);Ir.call(this),this.path=t,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),u=0,c=s.length;u<c;u++){var l=s[u];this[l]=i[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var qr=g((ku,$r)=>{"use strict";$r.exports=ii;var ti=Object.getPrototypeOf||function(e){return e.__proto__};function ii(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var r={__proto__:ti(e)};else var r=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))}),r}});var we=g((wu,or)=>{var q=P("fs"),si=_r(),ui=Ar(),oi=qr(),Ce=P("util"),L,Me;typeof Symbol=="function"&&typeof Symbol.for=="function"?(L=Symbol.for("graceful-fs.queue"),Me=Symbol.for("graceful-fs.previous")):(L="___graceful-fs.queue",Me="___graceful-fs.previous");function ci(){}function jr(e,r){Object.defineProperty(e,L,{get:function(){return r}})}var fe=ci;Ce.debuglog?fe=Ce.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(fe=function(){var e=Ce.format.apply(Ce,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});q[L]||(Or=global[L]||[],jr(q,Or),q.close=function(e){function r(n,t){return e.call(q,n,function(i){i||Fr(),typeof t=="function"&&t.apply(this,arguments)})}return Object.defineProperty(r,Me,{value:e}),r}(q.close),q.closeSync=function(e){function r(n){e.apply(q,arguments),Fr()}return Object.defineProperty(r,Me,{value:e}),r}(q.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){fe(q[L]),P("assert").equal(q[L].length,0)}));var Or;global[L]||jr(global,q[L]);or.exports=sr(oi(q));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!q.__patched&&(or.exports=sr(q),q.__patched=!0);function sr(e){si(e),e.gracefulify=sr,e.createReadStream=C,e.createWriteStream=le;var r=e.readFile;e.readFile=n;function n(v,w,b){return typeof w=="function"&&(b=w,w=null),E(v,w,b);function E(O,x,D,A){return r(O,x,function(_){_&&(_.code==="EMFILE"||_.code==="ENFILE")?ke([E,[O,x,D],_,A||Date.now(),Date.now()]):typeof D=="function"&&D.apply(this,arguments)})}}var t=e.writeFile;e.writeFile=i;function i(v,w,b,E){return typeof b=="function"&&(E=b,b=null),O(v,w,b,E);function O(x,D,A,_,F){return t(x,D,A,function(S){S&&(S.code==="EMFILE"||S.code==="ENFILE")?ke([O,[x,D,A,_],S,F||Date.now(),Date.now()]):typeof _=="function"&&_.apply(this,arguments)})}}var s=e.appendFile;s&&(e.appendFile=u);function u(v,w,b,E){return typeof b=="function"&&(E=b,b=null),O(v,w,b,E);function O(x,D,A,_,F){return s(x,D,A,function(S){S&&(S.code==="EMFILE"||S.code==="ENFILE")?ke([O,[x,D,A,_],S,F||Date.now(),Date.now()]):typeof _=="function"&&_.apply(this,arguments)})}}var c=e.copyFile;c&&(e.copyFile=l);function l(v,w,b,E){return typeof b=="function"&&(E=b,b=0),O(v,w,b,E);function O(x,D,A,_,F){return c(x,D,A,function(S){S&&(S.code==="EMFILE"||S.code==="ENFILE")?ke([O,[x,D,A,_],S,F||Date.now(),Date.now()]):typeof _=="function"&&_.apply(this,arguments)})}}var h=e.readdir;e.readdir=p;var o=/^v[0-5]\./;function p(v,w,b){typeof w=="function"&&(b=w,w=null);var E=o.test(process.version)?function(D,A,_,F){return h(D,O(D,A,_,F))}:function(D,A,_,F){return h(D,A,O(D,A,_,F))};return E(v,w,b);function O(x,D,A,_){return function(F,S){F&&(F.code==="EMFILE"||F.code==="ENFILE")?ke([E,[x,D,A],F,_||Date.now(),Date.now()]):(S&&S.sort&&S.sort(),typeof A=="function"&&A.call(this,F,S))}}}if(process.version.substr(0,4)==="v0.8"){var y=ui(e);k=y.ReadStream,j=y.WriteStream}var a=e.ReadStream;a&&(k.prototype=Object.create(a.prototype),k.prototype.open=I);var f=e.WriteStream;f&&(j.prototype=Object.create(f.prototype),j.prototype.open=W),Object.defineProperty(e,"ReadStream",{get:function(){return k},set:function(v){k=v},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return j},set:function(v){j=v},enumerable:!0,configurable:!0});var m=k;Object.defineProperty(e,"FileReadStream",{get:function(){return m},set:function(v){m=v},enumerable:!0,configurable:!0});var d=j;Object.defineProperty(e,"FileWriteStream",{get:function(){return d},set:function(v){d=v},enumerable:!0,configurable:!0});function k(v,w){return this instanceof k?(a.apply(this,arguments),this):k.apply(Object.create(k.prototype),arguments)}function I(){var v=this;ve(v.path,v.flags,v.mode,function(w,b){w?(v.autoClose&&v.destroy(),v.emit("error",w)):(v.fd=b,v.emit("open",b),v.read())})}function j(v,w){return this instanceof j?(f.apply(this,arguments),this):j.apply(Object.create(j.prototype),arguments)}function W(){var v=this;ve(v.path,v.flags,v.mode,function(w,b){w?(v.destroy(),v.emit("error",w)):(v.fd=b,v.emit("open",b))})}function C(v,w){return new e.ReadStream(v,w)}function le(v,w){return new e.WriteStream(v,w)}var he=e.open;e.open=ve;function ve(v,w,b,E){return typeof b=="function"&&(E=b,b=null),O(v,w,b,E);function O(x,D,A,_,F){return he(x,D,A,function(S,Ee){S&&(S.code==="EMFILE"||S.code==="ENFILE")?ke([O,[x,D,A,_],S,F||Date.now(),Date.now()]):typeof _=="function"&&_.apply(this,arguments)})}}return e}function ke(e){fe("ENQUEUE",e[0].name,e[1]),q[L].push(e),ur()}var Le;function Fr(){for(var e=Date.now(),r=0;r<q[L].length;++r)q[L][r].length>2&&(q[L][r][3]=e,q[L][r][4]=e);ur()}function ur(){if(clearTimeout(Le),Le=void 0,q[L].length!==0){var e=q[L].shift(),r=e[0],n=e[1],t=e[2],i=e[3],s=e[4];if(i===void 0)fe("RETRY",r.name,n),r.apply(null,n);else if(Date.now()-i>=6e4){fe("TIMEOUT",r.name,n);var u=n.pop();typeof u=="function"&&u.call(null,t)}else{var c=Date.now()-s,l=Math.max(s-i,1),h=Math.min(l*1.2,100);c>=h?(fe("RETRY",r.name,n),r.apply(null,n.concat([i]))):q[L].push(e)}Le===void 0&&(Le=setTimeout(ur,0))}}});var z=g(te=>{"use strict";var Rr=T().fromCallback,G=we(),li=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof G[e]=="function");Object.assign(te,G);li.forEach(e=>{te[e]=Rr(G[e])});te.exists=function(e,r){return typeof r=="function"?G.exists(e,r):new Promise(n=>G.exists(e,n))};te.read=function(e,r,n,t,i,s){return typeof s=="function"?G.read(e,r,n,t,i,s):new Promise((u,c)=>{G.read(e,r,n,t,i,(l,h,o)=>{if(l)return c(l);u({bytesRead:h,buffer:o})})})};te.write=function(e,r,...n){return typeof n[n.length-1]=="function"?G.write(e,r,...n):new Promise((t,i)=>{G.write(e,r,...n,(s,u,c)=>{if(s)return i(s);t({bytesWritten:u,buffer:c})})})};te.readv=function(e,r,...n){return typeof n[n.length-1]=="function"?G.readv(e,r,...n):new Promise((t,i)=>{G.readv(e,r,...n,(s,u,c)=>{if(s)return i(s);t({bytesRead:u,buffers:c})})})};te.writev=function(e,r,...n){return typeof n[n.length-1]=="function"?G.writev(e,r,...n):new Promise((t,i)=>{G.writev(e,r,...n,(s,u,c)=>{if(s)return i(s);t({bytesWritten:u,buffers:c})})})};typeof G.realpath.native=="function"?te.realpath.native=Rr(G.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Nr=g((bu,Tr)=>{"use strict";var ai=P("path");Tr.exports.checkPath=function(r){if(process.platform==="win32"&&/[<>:"|?*]/.test(r.replace(ai.parse(r).root,""))){let t=new Error(`Path contains invalid characters: ${r}`);throw t.code="EINVAL",t}}});var Ur=g((xu,cr)=>{"use strict";var Cr=z(),{checkPath:Lr}=Nr(),Mr=e=>{let r={mode:511};return typeof e=="number"?e:{...r,...e}.mode};cr.exports.makeDir=async(e,r)=>(Lr(e),Cr.mkdir(e,{mode:Mr(r),recursive:!0}));cr.exports.makeDirSync=(e,r)=>(Lr(e),Cr.mkdirSync(e,{mode:Mr(r),recursive:!0}))});var H=g((Eu,Wr)=>{"use strict";var fi=T().fromPromise,{makeDir:pi,makeDirSync:lr}=Ur(),ar=fi(pi);Wr.exports={mkdirs:ar,mkdirsSync:lr,mkdirp:ar,mkdirpSync:lr,ensureDir:ar,ensureDirSync:lr}});var ue=g((Su,zr)=>{"use strict";var yi=T().fromPromise,Gr=z();function hi(e){return Gr.access(e).then(()=>!0).catch(()=>!1)}zr.exports={pathExists:yi(hi),pathExistsSync:Gr.existsSync}});var fr=g((Du,Vr)=>{"use strict";var ge=z(),vi=T().fromPromise;async function mi(e,r,n){let t=await ge.open(e,"r+"),i=null;try{await ge.futimes(t,r,n)}finally{try{await ge.close(t)}catch(s){i=s}}if(i)throw i}function di(e,r,n){let t=ge.openSync(e,"r+");return ge.futimesSync(t,r,n),ge.closeSync(t)}Vr.exports={utimesMillis:vi(mi),utimesMillisSync:di}});var pe=g((_u,Hr)=>{"use strict";var be=z(),N=P("path"),Br=T().fromPromise;function ki(e,r,n){let t=n.dereference?i=>be.stat(i,{bigint:!0}):i=>be.lstat(i,{bigint:!0});return Promise.all([t(e),t(r).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,s])=>({srcStat:i,destStat:s}))}function wi(e,r,n){let t,i=n.dereference?u=>be.statSync(u,{bigint:!0}):u=>be.lstatSync(u,{bigint:!0}),s=i(e);try{t=i(r)}catch(u){if(u.code==="ENOENT")return{srcStat:s,destStat:null};throw u}return{srcStat:s,destStat:t}}async function gi(e,r,n,t){let{srcStat:i,destStat:s}=await ki(e,r,t);if(s){if(_e(i,s)){let u=N.basename(e),c=N.basename(r);if(n==="move"&&u!==c&&u.toLowerCase()===c.toLowerCase())return{srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${r}' with directory '${e}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${r}' with non-directory '${e}'.`)}if(i.isDirectory()&&pr(e,r))throw new Error(Ue(e,r,n));return{srcStat:i,destStat:s}}function bi(e,r,n,t){let{srcStat:i,destStat:s}=wi(e,r,t);if(s){if(_e(i,s)){let u=N.basename(e),c=N.basename(r);if(n==="move"&&u!==c&&u.toLowerCase()===c.toLowerCase())return{srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${r}' with directory '${e}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${r}' with non-directory '${e}'.`)}if(i.isDirectory()&&pr(e,r))throw new Error(Ue(e,r,n));return{srcStat:i,destStat:s}}async function Jr(e,r,n,t){let i=N.resolve(N.dirname(e)),s=N.resolve(N.dirname(n));if(s===i||s===N.parse(s).root)return;let u;try{u=await be.stat(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(_e(r,u))throw new Error(Ue(e,n,t));return Jr(e,r,s,t)}function Xr(e,r,n,t){let i=N.resolve(N.dirname(e)),s=N.resolve(N.dirname(n));if(s===i||s===N.parse(s).root)return;let u;try{u=be.statSync(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(_e(r,u))throw new Error(Ue(e,n,t));return Xr(e,r,s,t)}function _e(e,r){return r.ino&&r.dev&&r.ino===e.ino&&r.dev===e.dev}function pr(e,r){let n=N.resolve(e).split(N.sep).filter(i=>i),t=N.resolve(r).split(N.sep).filter(i=>i);return n.every((i,s)=>t[s]===i)}function Ue(e,r,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${r}'.`}Hr.exports={checkPaths:Br(gi),checkPathsSync:bi,checkParentPaths:Br(Jr),checkParentPathsSync:Xr,isSrcSubdir:pr,areIdentical:_e}});var en=g((Iu,Qr)=>{"use strict";var U=z(),Ie=P("path"),{mkdirs:xi}=H(),{pathExists:Ei}=ue(),{utimesMillis:Si}=fr(),Pe=pe();async function Di(e,r,n={}){typeof n=="function"&&(n={filter:n}),n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:t,destStat:i}=await Pe.checkPaths(e,r,"copy",n);if(await Pe.checkParentPaths(e,t,r,"copy"),!await Yr(e,r,n))return;let u=Ie.dirname(r);await Ei(u)||await xi(u),await Zr(i,e,r,n)}async function Yr(e,r,n){return n.filter?n.filter(e,r):!0}async function Zr(e,r,n,t){let s=await(t.dereference?U.stat:U.lstat)(r);if(s.isDirectory())return Ai(s,e,r,n,t);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return _i(s,e,r,n,t);if(s.isSymbolicLink())return $i(e,r,n,t);throw s.isSocket()?new Error(`Cannot copy a socket file: ${r}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${r}`):new Error(`Unknown file: ${r}`)}async function _i(e,r,n,t,i){if(!r)return Kr(e,n,t,i);if(i.overwrite)return await U.unlink(t),Kr(e,n,t,i);if(i.errorOnExist)throw new Error(`'${t}' already exists`)}async function Kr(e,r,n,t){if(await U.copyFile(r,n),t.preserveTimestamps){Ii(e.mode)&&await Pi(n,e.mode);let i=await U.stat(r);await Si(n,i.atime,i.mtime)}return U.chmod(n,e.mode)}function Ii(e){return(e&128)===0}function Pi(e,r){return U.chmod(e,r|128)}async function Ai(e,r,n,t,i){r||await U.mkdir(t);let s=[];for await(let u of await U.opendir(n)){let c=Ie.join(n,u.name),l=Ie.join(t,u.name);s.push(Yr(c,l,i).then(h=>{if(h)return Pe.checkPaths(c,l,"copy",i).then(({destStat:o})=>Zr(o,c,l,i))}))}await Promise.all(s),r||await U.chmod(t,e.mode)}async function $i(e,r,n,t){let i=await U.readlink(r);if(t.dereference&&(i=Ie.resolve(process.cwd(),i)),!e)return U.symlink(i,n);let s=null;try{s=await U.readlink(n)}catch(u){if(u.code==="EINVAL"||u.code==="UNKNOWN")return U.symlink(i,n);throw u}if(t.dereference&&(s=Ie.resolve(process.cwd(),s)),Pe.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(Pe.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return await U.unlink(n),U.symlink(i,n)}Qr.exports=Di});var un=g((Pu,sn)=>{"use strict";var V=we(),Ae=P("path"),qi=H().mkdirsSync,Oi=fr().utimesMillisSync,$e=pe();function Fi(e,r,n){typeof n=="function"&&(n={filter:n}),n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:t,destStat:i}=$e.checkPathsSync(e,r,"copy",n);if($e.checkParentPathsSync(e,t,r,"copy"),n.filter&&!n.filter(e,r))return;let s=Ae.dirname(r);return V.existsSync(s)||qi(s),rn(i,e,r,n)}function rn(e,r,n,t){let s=(t.dereference?V.statSync:V.lstatSync)(r);if(s.isDirectory())return Mi(s,e,r,n,t);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return ji(s,e,r,n,t);if(s.isSymbolicLink())return Gi(e,r,n,t);throw s.isSocket()?new Error(`Cannot copy a socket file: ${r}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${r}`):new Error(`Unknown file: ${r}`)}function ji(e,r,n,t,i){return r?Ri(e,n,t,i):nn(e,n,t,i)}function Ri(e,r,n,t){if(t.overwrite)return V.unlinkSync(n),nn(e,r,n,t);if(t.errorOnExist)throw new Error(`'${n}' already exists`)}function nn(e,r,n,t){return V.copyFileSync(r,n),t.preserveTimestamps&&Ti(e.mode,r,n),yr(n,e.mode)}function Ti(e,r,n){return Ni(e)&&Ci(n,e),Li(r,n)}function Ni(e){return(e&128)===0}function Ci(e,r){return yr(e,r|128)}function yr(e,r){return V.chmodSync(e,r)}function Li(e,r){let n=V.statSync(e);return Oi(r,n.atime,n.mtime)}function Mi(e,r,n,t,i){return r?tn(n,t,i):Ui(e.mode,n,t,i)}function Ui(e,r,n,t){return V.mkdirSync(n),tn(r,n,t),yr(n,e)}function tn(e,r,n){let t=V.opendirSync(e);try{let i;for(;(i=t.readSync())!==null;)Wi(i.name,e,r,n)}finally{t.closeSync()}}function Wi(e,r,n,t){let i=Ae.join(r,e),s=Ae.join(n,e);if(t.filter&&!t.filter(i,s))return;let{destStat:u}=$e.checkPathsSync(i,s,"copy",t);return rn(u,i,s,t)}function Gi(e,r,n,t){let i=V.readlinkSync(r);if(t.dereference&&(i=Ae.resolve(process.cwd(),i)),e){let s;try{s=V.readlinkSync(n)}catch(u){if(u.code==="EINVAL"||u.code==="UNKNOWN")return V.symlinkSync(i,n);throw u}if(t.dereference&&(s=Ae.resolve(process.cwd(),s)),$e.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if($e.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return zi(i,n)}else return V.symlinkSync(i,n)}function zi(e,r){return V.unlinkSync(r),V.symlinkSync(e,r)}sn.exports=Fi});var We=g((Au,on)=>{"use strict";var Vi=T().fromPromise;on.exports={copy:Vi(en()),copySync:un()}});var qe=g(($u,ln)=>{"use strict";var cn=we(),Bi=T().fromCallback;function Ji(e,r){cn.rm(e,{recursive:!0,force:!0},r)}function Xi(e){cn.rmSync(e,{recursive:!0,force:!0})}ln.exports={remove:Bi(Ji),removeSync:Xi}});var dn=g((qu,mn)=>{"use strict";var Hi=T().fromPromise,pn=z(),yn=P("path"),hn=H(),vn=qe(),an=Hi(async function(r){let n;try{n=await pn.readdir(r)}catch{return hn.mkdirs(r)}return Promise.all(n.map(t=>vn.remove(yn.join(r,t))))});function fn(e){let r;try{r=pn.readdirSync(e)}catch{return hn.mkdirsSync(e)}r.forEach(n=>{n=yn.join(e,n),vn.removeSync(n)})}mn.exports={emptyDirSync:fn,emptydirSync:fn,emptyDir:an,emptydir:an}});var bn=g((Ou,gn)=>{"use strict";var Ki=T().fromPromise,kn=P("path"),ie=z(),wn=H();async function Yi(e){let r;try{r=await ie.stat(e)}catch{}if(r&&r.isFile())return;let n=kn.dirname(e),t=null;try{t=await ie.stat(n)}catch(i){if(i.code==="ENOENT"){await wn.mkdirs(n),await ie.writeFile(e,"");return}else throw i}t.isDirectory()?await ie.writeFile(e,""):await ie.readdir(n)}function Zi(e){let r;try{r=ie.statSync(e)}catch{}if(r&&r.isFile())return;let n=kn.dirname(e);try{ie.statSync(n).isDirectory()||ie.readdirSync(n)}catch(t){if(t&&t.code==="ENOENT")wn.mkdirsSync(n);else throw t}ie.writeFileSync(e,"")}gn.exports={createFile:Ki(Yi),createFileSync:Zi}});var _n=g((Fu,Dn)=>{"use strict";var Qi=T().fromPromise,xn=P("path"),oe=z(),En=H(),{pathExists:es}=ue(),{areIdentical:Sn}=pe();async function rs(e,r){let n;try{n=await oe.lstat(r)}catch{}let t;try{t=await oe.lstat(e)}catch(u){throw u.message=u.message.replace("lstat","ensureLink"),u}if(n&&Sn(t,n))return;let i=xn.dirname(r);await es(i)||await En.mkdirs(i),await oe.link(e,r)}function ns(e,r){let n;try{n=oe.lstatSync(r)}catch{}try{let s=oe.lstatSync(e);if(n&&Sn(s,n))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let t=xn.dirname(r);return oe.existsSync(t)||En.mkdirsSync(t),oe.linkSync(e,r)}Dn.exports={createLink:Qi(rs),createLinkSync:ns}});var Pn=g((ju,In)=>{"use strict";var ce=P("path"),Oe=z(),{pathExists:ts}=ue(),is=T().fromPromise;async function ss(e,r){if(ce.isAbsolute(e)){try{await Oe.lstat(e)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:e,toDst:e}}let n=ce.dirname(r),t=ce.join(n,e);if(await ts(t))return{toCwd:t,toDst:e};try{await Oe.lstat(e)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:e,toDst:ce.relative(n,e)}}function us(e,r){if(ce.isAbsolute(e)){if(!Oe.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}let n=ce.dirname(r),t=ce.join(n,e);if(Oe.existsSync(t))return{toCwd:t,toDst:e};if(!Oe.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:ce.relative(n,e)}}In.exports={symlinkPaths:is(ss),symlinkPathsSync:us}});var qn=g((Ru,$n)=>{"use strict";var An=z(),os=T().fromPromise;async function cs(e,r){if(r)return r;let n;try{n=await An.lstat(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}function ls(e,r){if(r)return r;let n;try{n=An.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}$n.exports={symlinkType:os(cs),symlinkTypeSync:ls}});var Rn=g((Tu,jn)=>{"use strict";var as=T().fromPromise,On=P("path"),ee=z(),{mkdirs:fs,mkdirsSync:ps}=H(),{symlinkPaths:ys,symlinkPathsSync:hs}=Pn(),{symlinkType:vs,symlinkTypeSync:ms}=qn(),{pathExists:ds}=ue(),{areIdentical:Fn}=pe();async function ks(e,r,n){let t;try{t=await ee.lstat(r)}catch{}if(t&&t.isSymbolicLink()){let[c,l]=await Promise.all([ee.stat(e),ee.stat(r)]);if(Fn(c,l))return}let i=await ys(e,r);e=i.toDst;let s=await vs(i.toCwd,n),u=On.dirname(r);return await ds(u)||await fs(u),ee.symlink(e,r,s)}function ws(e,r,n){let t;try{t=ee.lstatSync(r)}catch{}if(t&&t.isSymbolicLink()){let c=ee.statSync(e),l=ee.statSync(r);if(Fn(c,l))return}let i=hs(e,r);e=i.toDst,n=ms(i.toCwd,n);let s=On.dirname(r);return ee.existsSync(s)||ps(s),ee.symlinkSync(e,r,n)}jn.exports={createSymlink:as(ks),createSymlinkSync:ws}});var Gn=g((Nu,Wn)=>{"use strict";var{createFile:Tn,createFileSync:Nn}=bn(),{createLink:Cn,createLinkSync:Ln}=_n(),{createSymlink:Mn,createSymlinkSync:Un}=Rn();Wn.exports={createFile:Tn,createFileSync:Nn,ensureFile:Tn,ensureFileSync:Nn,createLink:Cn,createLinkSync:Ln,ensureLink:Cn,ensureLinkSync:Ln,createSymlink:Mn,createSymlinkSync:Un,ensureSymlink:Mn,ensureSymlinkSync:Un}});var Ge=g((Cu,zn)=>{function gs(e,{EOL:r=`
`,finalEOL:n=!0,replacer:t=null,spaces:i}={}){let s=n?r:"";return JSON.stringify(e,t,i).replace(/\n/g,r)+s}function bs(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}zn.exports={stringify:gs,stripBom:bs}});var Xn=g((Lu,Jn)=>{var xe;try{xe=we()}catch{xe=P("fs")}var ze=T(),{stringify:Vn,stripBom:Bn}=Ge();async function xs(e,r={}){typeof r=="string"&&(r={encoding:r});let n=r.fs||xe,t="throws"in r?r.throws:!0,i=await ze.fromCallback(n.readFile)(e,r);i=Bn(i);let s;try{s=JSON.parse(i,r?r.reviver:null)}catch(u){if(t)throw u.message=`${e}: ${u.message}`,u;return null}return s}var Es=ze.fromPromise(xs);function Ss(e,r={}){typeof r=="string"&&(r={encoding:r});let n=r.fs||xe,t="throws"in r?r.throws:!0;try{let i=n.readFileSync(e,r);return i=Bn(i),JSON.parse(i,r.reviver)}catch(i){if(t)throw i.message=`${e}: ${i.message}`,i;return null}}async function Ds(e,r,n={}){let t=n.fs||xe,i=Vn(r,n);await ze.fromCallback(t.writeFile)(e,i,n)}var _s=ze.fromPromise(Ds);function Is(e,r,n={}){let t=n.fs||xe,i=Vn(r,n);return t.writeFileSync(e,i,n)}var Ps={readFile:Es,readFileSync:Ss,writeFile:_s,writeFileSync:Is};Jn.exports=Ps});var Kn=g((Mu,Hn)=>{"use strict";var Ve=Xn();Hn.exports={readJson:Ve.readFile,readJsonSync:Ve.readFileSync,writeJson:Ve.writeFile,writeJsonSync:Ve.writeFileSync}});var Be=g((Uu,Qn)=>{"use strict";var As=T().fromPromise,hr=z(),Yn=P("path"),Zn=H(),$s=ue().pathExists;async function qs(e,r,n="utf-8"){let t=Yn.dirname(e);return await $s(t)||await Zn.mkdirs(t),hr.writeFile(e,r,n)}function Os(e,...r){let n=Yn.dirname(e);hr.existsSync(n)||Zn.mkdirsSync(n),hr.writeFileSync(e,...r)}Qn.exports={outputFile:As(qs),outputFileSync:Os}});var rt=g((Wu,et)=>{"use strict";var{stringify:Fs}=Ge(),{outputFile:js}=Be();async function Rs(e,r,n={}){let t=Fs(r,n);await js(e,t,n)}et.exports=Rs});var tt=g((Gu,nt)=>{"use strict";var{stringify:Ts}=Ge(),{outputFileSync:Ns}=Be();function Cs(e,r,n){let t=Ts(r,n);Ns(e,t,n)}nt.exports=Cs});var st=g((zu,it)=>{"use strict";var Ls=T().fromPromise,B=Kn();B.outputJson=Ls(rt());B.outputJsonSync=tt();B.outputJSON=B.outputJson;B.outputJSONSync=B.outputJsonSync;B.writeJSON=B.writeJson;B.writeJSONSync=B.writeJsonSync;B.readJSON=B.readJson;B.readJSONSync=B.readJsonSync;it.exports=B});var at=g((Vu,lt)=>{"use strict";var Ms=z(),ut=P("path"),{copy:Us}=We(),{remove:ct}=qe(),{mkdirp:Ws}=H(),{pathExists:Gs}=ue(),ot=pe();async function zs(e,r,n={}){let t=n.overwrite||n.clobber||!1,{srcStat:i,isChangingCase:s=!1}=await ot.checkPaths(e,r,"move",n);await ot.checkParentPaths(e,i,r,"move");let u=ut.dirname(r);return ut.parse(u).root!==u&&await Ws(u),Vs(e,r,t,s)}async function Vs(e,r,n,t){if(!t){if(n)await ct(r);else if(await Gs(r))throw new Error("dest already exists.")}try{await Ms.rename(e,r)}catch(i){if(i.code!=="EXDEV")throw i;await Bs(e,r,n)}}async function Bs(e,r,n){return await Us(e,r,{overwrite:n,errorOnExist:!0,preserveTimestamps:!0}),ct(e)}lt.exports=zs});var vt=g((Bu,ht)=>{"use strict";var pt=we(),mr=P("path"),Js=We().copySync,yt=qe().removeSync,Xs=H().mkdirpSync,ft=pe();function Hs(e,r,n){n=n||{};let t=n.overwrite||n.clobber||!1,{srcStat:i,isChangingCase:s=!1}=ft.checkPathsSync(e,r,"move",n);return ft.checkParentPathsSync(e,i,r,"move"),Ks(r)||Xs(mr.dirname(r)),Ys(e,r,t,s)}function Ks(e){let r=mr.dirname(e);return mr.parse(r).root===r}function Ys(e,r,n,t){if(t)return vr(e,r,n);if(n)return yt(r),vr(e,r,n);if(pt.existsSync(r))throw new Error("dest already exists.");return vr(e,r,n)}function vr(e,r,n){try{pt.renameSync(e,r)}catch(t){if(t.code!=="EXDEV")throw t;return Zs(e,r,n)}}function Zs(e,r,n){return Js(e,r,{overwrite:n,errorOnExist:!0,preserveTimestamps:!0}),yt(e)}ht.exports=Hs});var dt=g((Ju,mt)=>{"use strict";var Qs=T().fromPromise;mt.exports={move:Qs(at()),moveSync:vt()}});var wt=g((Xu,kt)=>{"use strict";kt.exports={...z(),...We(),...dn(),...Gn(),...st(),...H(),...dt(),...Be(),...ue(),...qe()}});var fu={};Mt(fu,{default:()=>au});var $=P("@yarnpkg/core"),Z=P("clipanion"),Y=P("@yarnpkg/core");var Ke;function Er(e){return{lang:e?.lang??Ke?.lang,message:e?.message,abortEarly:e?.abortEarly??Ke?.abortEarly,abortPipeEarly:e?.abortPipeEarly??Ke?.abortPipeEarly}}var Wt;function Gt(e){return Wt?.get(e)}var zt;function Vt(e){return zt?.get(e)}var Bt;function Jt(e,r){return Bt?.get(e)?.get(r)}function Sr(e){let r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":r}function J(e,r,n,t,i){let s=i&&"input"in i?i.input:n.value,u=i?.expected??e.expects??null,c=i?.received??Sr(s),l={kind:e.kind,type:e.type,input:s,expected:u,received:c,message:`Invalid ${r}: ${u?`Expected ${u} but r`:"R"}eceived ${c}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:t.lang,abortEarly:t.abortEarly,abortPipeEarly:t.abortPipeEarly},h=e.kind==="schema",o=i?.message??e.message??Jt(e.reference,l.lang)??(h?Vt(l.lang):null)??t.message??Gt(l.lang);o!==void 0&&(l.message=typeof o=="function"?o(l):o),h&&(n.typed=!1),n.issues?n.issues.push(l):n.issues=[l]}function X(e){return{version:1,vendor:"valibot",validate(r){return e["~run"]({value:r},Er())}}}function Xt(e,r){return Object.hasOwn(e,r)&&r!=="__proto__"&&r!=="prototype"&&r!=="constructor"}function Ht(e,r){let n=[...new Set(e)];return n.length>1?`(${n.join(` ${r} `)})`:n[0]??"never"}var Kt=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};var yu=new RegExp("^(?:[\\u{1F1E6}-\\u{1F1FF}]{2}|\\u{1F3F4}[\\u{E0061}-\\u{E007A}]{2}[\\u{E0030}-\\u{E0039}\\u{E0061}-\\u{E007A}]{1,3}\\u{E007F}|(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation})(?:\\u200D(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation}))*)+$","u");function Ye(e){return{kind:"transformation",type:"transform",reference:Ye,async:!1,operation:e,"~run"(r){return r.value=this.operation(r.value),r}}}function Ze(e){return{kind:"validation",type:"url",reference:Ze,async:!1,expects:null,requirement(r){try{return new URL(r),!0}catch{return!1}},message:e,"~run"(r,n){return r.typed&&!this.requirement(r.value)&&J(this,"URL",r,n),r}}}function Yt(e,r,n){return typeof e.fallback=="function"?e.fallback(r,n):e.fallback}function Qe(e,r,n){return typeof e.default=="function"?e.default(r,n):e.default}function Q(e,r){return{kind:"schema",type:"array",reference:Q,expects:"Array",async:!1,item:e,message:r,get"~standard"(){return X(this)},"~run"(n,t){let i=n.value;if(Array.isArray(i)){n.typed=!0,n.value=[];for(let s=0;s<i.length;s++){let u=i[s],c=this.item["~run"]({value:u},t);if(c.issues){let l={type:"array",origin:"value",input:i,key:s,value:u};for(let h of c.issues)h.path?h.path.unshift(l):h.path=[l],n.issues?.push(h);if(n.issues||(n.issues=c.issues),t.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value.push(c.value)}}else J(this,"type",n,t);return n}}}function Se(e){return{kind:"schema",type:"boolean",reference:Se,expects:"boolean",async:!1,message:e,get"~standard"(){return X(this)},"~run"(r,n){return typeof r.value=="boolean"?r.typed=!0:J(this,"type",r,n),r}}}function ae(e,r){return{kind:"schema",type:"literal",reference:ae,expects:Sr(e),async:!1,literal:e,message:r,get"~standard"(){return X(this)},"~run"(n,t){return n.value===this.literal?n.typed=!0:J(this,"type",n,t),n}}}function me(e,r){return{kind:"schema",type:"nullish",reference:me,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,default:r,get"~standard"(){return X(this)},"~run"(n,t){return(n.value===null||n.value===void 0)&&(this.default!==void 0&&(n.value=Qe(this,n,t)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,t)}}}function er(e){return{kind:"schema",type:"number",reference:er,expects:"number",async:!1,message:e,get"~standard"(){return X(this)},"~run"(r,n){return typeof r.value=="number"&&!isNaN(r.value)?r.typed=!0:J(this,"type",r,n),r}}}function de(e,r){return{kind:"schema",type:"object",reference:de,expects:"Object",async:!1,entries:e,message:r,get"~standard"(){return X(this)},"~run"(n,t){let i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(let s in this.entries){let u=this.entries[s];if(s in i||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){let c=s in i?i[s]:Qe(u),l=u["~run"]({value:c},t);if(l.issues){let h={type:"object",origin:"value",input:i,key:s,value:c};for(let o of l.issues)o.path?o.path.unshift(h):o.path=[h],n.issues?.push(o);if(n.issues||(n.issues=l.issues),t.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value[s]=l.value}else if(u.fallback!==void 0)n.value[s]=Yt(u);else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(J(this,"key",n,t,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:i,key:s,value:i[s]}]}),t.abortEarly))break}}else J(this,"type",n,t);return n}}}function De(e,r){return{kind:"schema",type:"optional",reference:De,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:r,get"~standard"(){return X(this)},"~run"(n,t){return n.value===void 0&&(this.default!==void 0&&(n.value=Qe(this,n,t)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,t)}}}function rr(e,r,n){return{kind:"schema",type:"record",reference:rr,expects:"Object",async:!1,key:e,value:r,message:n,get"~standard"(){return X(this)},"~run"(t,i){let s=t.value;if(s&&typeof s=="object"){t.typed=!0,t.value={};for(let u in s)if(Xt(s,u)){let c=s[u],l=this.key["~run"]({value:u},i);if(l.issues){let o={type:"object",origin:"key",input:s,key:u,value:c};for(let p of l.issues)p.path=[o],t.issues?.push(p);if(t.issues||(t.issues=l.issues),i.abortEarly){t.typed=!1;break}}let h=this.value["~run"]({value:c},i);if(h.issues){let o={type:"object",origin:"value",input:s,key:u,value:c};for(let p of h.issues)p.path?p.path.unshift(o):p.path=[o],t.issues?.push(p);if(t.issues||(t.issues=h.issues),i.abortEarly){t.typed=!1;break}}(!l.typed||!h.typed)&&(t.typed=!1),l.typed&&(t.value[l.value]=h.value)}}else J(this,"type",t,i);return t}}}function R(e){return{kind:"schema",type:"string",reference:R,expects:"string",async:!1,message:e,get"~standard"(){return X(this)},"~run"(r,n){return typeof r.value=="string"?r.typed=!0:J(this,"type",r,n),r}}}function xr(e){let r;if(e)for(let n of e)r?r.push(...n.issues):r=n.issues;return r}function Re(e,r){return{kind:"schema",type:"union",reference:Re,expects:Ht(e.map(n=>n.expects),"|"),async:!1,options:e,message:r,get"~standard"(){return X(this)},"~run"(n,t){let i,s,u;for(let c of this.options){let l=c["~run"]({value:n.value},t);if(l.typed)if(l.issues)s?s.push(l):s=[l];else{i=l;break}else u?u.push(l):u=[l]}if(i)return i;if(s){if(s.length===1)return s[0];J(this,"type",n,t,{issues:xr(s)}),n.typed=!0}else{if(u?.length===1)return u[0];J(this,"type",n,t,{issues:xr(u)})}return n}}}function Te(e,r,n){let t=e["~run"]({value:r},Er(n));if(t.issues)throw new Kt(t.issues);return t.value}function nr(...e){return{...e[0],pipe:e,get"~standard"(){return X(this)},"~run"(r,n){for(let t of e)if(t.kind!=="metadata"){if(r.issues&&(t.kind==="schema"||t.kind==="transformation")){r.typed=!1;break}(!r.issues||!n.abortEarly&&!n.abortPipeEarly)&&(r=t["~run"](r,n))}return r}}}var ne=P("path"),Ft=P("readline"),M=He(wt());var K=He(P("semver")),ye=P("@yarnpkg/core");function gt(e){let{name:r,range:n,scope:t}=e,i=n.split(":").at(-1);return t?[`@${t}/${r}`,i||"*"]:[r,i||"*"]}function bt(e,r){if(e.has(r.descriptorHash)){let n=e.get(r.descriptorHash);if(n)switch(n.group){case"dependencies":return"main";case"devDependencies":return"dev";case"peerDependencies":return"peer"}}return"dependencies"}function eu(e,r){if(!e||!r)throw new Error("Both currentVersion and latestVersion must be provided.");let n=K.parse(e),t=K.parse(r);if(!n||!t)throw new Error("Invalid version format.");return K.lt(n,t)?K.major(n)<K.major(t)?"Major Update":K.minor(n)<K.minor(t)?"Minor Update":"Patch Update":"Up-to-date"}function xt(e,r){try{return eu(e,r)}catch{return"Unknown"}}function Et(e,r){return process.stdout.isTTY?`\x1B]8;;${r}\x07${e}\x1B]8;;\x07`:e}function St(e,r){let n={};for(let t of r.storedPackages.values()){if(ye.structUtils.isVirtualLocator(t))continue;let i={};for(let s of[...t.dependencies.values()]){let u=ye.structUtils.stringifyIdent(s),c=ye.structUtils.stringifyDescriptor(s);i[u]=c}Object.keys(i).includes(e.name)&&(n[ye.structUtils.stringifyIdent(t)]=i[e.name])}return n}function Dt(e,r){let n={};for(let t of e.storedPackages.values()){if(ye.structUtils.isVirtualLocator(t))continue;let i=ye.structUtils.stringifyIdent(t);if(r[i]){n[r[i].identHash]=r[i];for(let s of[...t.dependencies.values()])n[s.identHash]=s}}return n}function dr(e){return e?e.replace(/[\^~<>=]*\s*/g,"").trim():null}function _t(e,r){return fetch("https://registry.npmjs.org/-/npm/v1/security/audits/quick",{method:"POST",body:JSON.stringify({name:"npm_audit_test",version:"1.0.0",requires:{[e]:`^${r}`},dependencies:{[e]:{version:`${r}`}}}),headers:{"Content-Type":"application/json"}})}var It="https://raw.githubusercontent.com/IamAbbey/dependencies-inspect/refs/heads/main/src/yarn_plugin/bundles/%40yarnpkg/webui/index.html";async function Pt(e){try{let r=await fetch(e);if(!r.ok)throw new Error("Something went wrong");return await r.text()}catch(r){throw new Error(`Something went wrong: ${r}`)}}var Je=(i=>(i.MAIN="main",i.DEV="dev",i.PEER="peer",i.DEPENDENCIES="dependencies",i))(Je||{}),ru=nr(R("A URL must be string."),Ze("The URL is badly formatted.")),nu=de({cves:Q(R()),title:R(),overview:me(R()),recommendation:me(R()),id:er(),url:ru,vulnerable_versions:R(),severity:R()}),kr=nr(de({name:R(),current_version:R(),latest_version:me(R()),installed_status:Re([ae("installed"),ae("not-installed")]),update_status:me(Re([ae("up-to-date"),ae("semver-safe-update"),ae("update-possible")])),compatible:Se(),group:R(),description:De(R(),"No description available"),license:De(R()),dependencies:rr(R(),R()),required_by:Q(R()),vulnerabilities:Q(nu)}),Ye(e=>({...e,update_type:xt(e.current_version,e.latest_version)}))),wr=de({show_latest:Se(),show_all:De(Se(),!1),package_manager:R()}),At=de({groups:Q(R()),top_level_packages:Q(R()),packages:Q(kr),config:wr});var jt=P("semver");var re=P("@yarnpkg/core"),$t=He(P("semver"));var tu=/^([\^~]?)[0-9]+(?:\.[0-9]+){0,2}(?:-\S+)?$/;function iu(e,{project:r}){let n=e.match(tu);return n?n[1]:r.configuration.get("defaultSemverRangePrefix")}async function qt(e,r,{project:n,cache:t,workspace:i,preserveModifier:s=!0,modifier:u}){let c=n.configuration.normalizeDependency(re.structUtils.makeDescriptor(e,r)),l=new re.ThrowReport,h=n.configuration.makeFetcher(),o=n.configuration.makeResolver(),p={project:n,fetcher:h,cache:t,checksums:n.storedChecksums,report:l,cacheOptions:{skipIntegrityCheck:!0}},y={...p,resolver:o,fetchOptions:p},a=o.bindDescriptor(c,i.anchoredLocator,y),f=await o.getCandidates(a,{},y);if(f.length===0)return null;let m=f[0],{protocol:d,source:k,params:I,selector:j}=re.structUtils.parseRange(re.structUtils.convertToManifestRange(m.reference)),W=d,C=j;if(W===n.configuration.get("defaultProtocol")&&(W=null),$t.valid(C)){let le=C;if(typeof u<"u")C=u+C;else if(s!==!1){let v=typeof s=="string"?s:c.range;C=iu(v,{project:n})+C}let he=re.structUtils.makeDescriptor(m,re.structUtils.makeRange({protocol:W,source:k,params:I,selector:C}));(await o.getCandidates(n.configuration.normalizeDependency(he),{},y)).length!==1&&(C=le)}return re.structUtils.makeDescriptor(m,re.structUtils.makeRange({protocol:W,source:k,params:I,selector:C}))}var su="yarn",uu=(0,ne.resolve)(__dirname),ou="poetry_inspect_report",cu=(0,ne.join)(uu,"webui"),Ot=process.env.WEB_UI_BUILD_DIR?process.env.WEB_UI_BUILD_DIR:cu,gr=class{constructor(r){this.options=r}async createReport(r,n,t,i,s){let u=$.formatUtils.mark(i),c=Te(At,{groups:Object.keys(Je).map(l=>l.toLowerCase()),top_level_packages:n.sort(),packages:r,config:Te(wr,{show_latest:this.options.showLatest,package_manager:su,show_all:this.options.showAll})});s.reportInfo(null,`${u.Check} Writing report to file...`);try{let l=(0,ne.join)(t,this.options.outputDir),h=(0,ne.join)(l,"index.html");await M.remove(l);try{await M.access(Ot),await M.copy(Ot,l,{overwrite:!0})}catch{let d=await Pt(It);try{await M.access(l)}catch{await M.mkdir(l,{recursive:!0})}await M.writeFile(h,d,"utf-8")}let o=h+".tmp",p=M.createReadStream(h),y=M.createWriteStream(o),a=(0,Ft.createInterface)({input:p});for await(let d of a)d.trim().includes("window.webUIData = undefined")?y.write(`window.webUIData = ${JSON.stringify(c)};
`):y.write(d+`
`);a.close(),y.end(),await M.rename(o,h);let f=`${(0,ne.basename)(l)}/${(0,ne.basename)(h)}`,m=(0,ne.resolve)(h);s.reportInfo(null,`${u.Check} Wrote HTML report to ${Et(f,`file://${m}`)}`)}catch(l){throw new Z.UsageError(`Error generating report: ${l.message}`)}}async runner(r,n,t,i){let s=$.formatUtils.mark(n),u=await $.Cache.find(n),c=new Map;for(let f of r.workspaces)for(let m of["dependencies","devDependencies","peerDependencies"])for(let d of f.manifest[m].values())r.tryWorkspaceByDescriptor(d)===null&&(d.range.startsWith("link:")||c.set(d.descriptorHash,{descriptor:d,group:m,workspace:f}));let l=Array.from(c.values()).reduce((f={},m)=>({...f,[Y.structUtils.stringifyIdent(m.descriptor)]:m.descriptor}),{}),h=Object.keys(l).sort(),o=h.reduce((f={},m)=>({...f,[m]:"not-installed"}),{}),p=Dt(r,l),y=[],a=[];return await t.startTimerPromise("Compilation step",async()=>{let f=Array.from(r.storedPackages.values()).filter(k=>{let I=Y.structUtils.stringifyIdent(k);return!(Y.structUtils.isVirtualLocator(k)||p[k.identHash]===void 0||!this.options.showAll&&!h.includes(I)||a.includes(I))}),m=$.Report.progressViaCounter(f.length);await t.reportProgress(m);let d=$.miscUtils.sortMap([...f],k=>Y.structUtils.stringifyIdent(k));for(let k of d){let I=Y.structUtils.stringifyIdent(k);this.options.silent||t.reportInfo($.MessageName.UNNAMED,`${s.Question} Generating report for ${I}`);let j=k.version||"unknown",W=null,C=null,le=[],he=n.makeFetcher(),ve={project:r,fetcher:he,cache:u,checksums:r.storedChecksums,report:new $.ThrowReport,cacheOptions:{skipIntegrityCheck:!0}},v=await he.fetch(k,ve),w;try{w=await $.Manifest.find(v.prefixPath,{baseFs:v.packageFs})}finally{v.releaseFs?.()}if(this.options.showAll||h.includes(I))try{if(this.options.showLatest){let E=async(x,D,A,_)=>{let F=await qt(D,_,{project:r,cache:u,preserveModifier:A,workspace:x});return F!==null?F.range:D.range};await(async x=>{this.options.silent||t.reportInfo($.MessageName.UNNAMED,"   \u21B3 Fetching latest version...");let D=(0,jt.valid)(x.range)?`^${x.range}`:x.range,A=c.get(x.descriptorHash)?c.get(x.descriptorHash).workspace:i,[_,F]=await Promise.all([E(A,x,x.range,D).catch(()=>null),E(A,x,x.range,"latest").catch(()=>null)]),S=Y.structUtils.tryParseRange(_),Ee=Y.structUtils.tryParseRange(F),Xe=Y.structUtils.tryParseRange(x.range);S&&S.selector!==Xe.selector?(W=S.selector,C="semver-safe-update"):S&&S.selector===Xe.selector&&(W=j,C="up-to-date"),Ee&&Ee.selector!==S.selector&&Ee.selector!==Xe.selector&&(W=Ee.selector,C="update-possible")})(p[k.identHash])}if(this.options.showVulnerability){this.options.silent||t.reportInfo($.MessageName.UNNAMED,"   \u21B3 Fetching vulnerability report ...");let E=await _t(I,j).then(O=>O.json()).catch(()=>{});E&&(le=Object.values(E.advisories))}}catch(E){throw new Error(`Something went wrong!!, ${E}`)}let b=[...new Set([...k.dependencies.values()].filter(E=>!Y.structUtils.isVirtualDescriptor(E)).map(E=>gt(E)))];Object.keys(o).includes(I)&&(o[I]="installed"),a.push(I),y.push({name:I,current_version:dr(j),latest_version:dr(W),update_status:C,description:w.raw.description,license:w.raw.license,installed_status:o[I]??"installed",compatible:Y.structUtils.isPackageCompatible(k,$.nodeUtils.getArchitectureSet()),group:bt(c,p[k.identHash]),dependencies:b.reduce((E={},O)=>{let[x,D]=O;return{...E,[x]:D}},{}),required_by:this.options.showAll?Object.keys(St(k,r)):[],vulnerabilities:le}),m.tick()}}),{packages:y,topLevelDependencies:h}}},Fe=class extends Z.Command{constructor(){super(...arguments);this.show_latest=Z.Option.Boolean("-l,--latest",!1,{description:`Show the latest version, by default, only applies on the direct dependencies from the current workspace.
    To get latest report on the whole project, use the --all flags.`});this.show_vulnerability=Z.Option.Boolean("-x,--vulnerability",!1,{description:`Audit packages and report any vulnerabilities, by default, only applies on the direct dependencies from the current workspace.
    To get vulnerability report on the whole project, use the --all flags.`});this.all=Z.Option.Boolean("-a,--all",!1,{description:"to apply the inspect options on all packages, including transitive dependencies"});this.silent=Z.Option.Boolean("-s,--silent",!1,{description:"Silent report logs"});this.output=Z.Option.String("-o,--output",ou,{description:"The name of the output folder."})}static{this.paths=[["inspect"]]}static{this.usage=Z.Command.Usage({description:"Generates HTML report for installed packages with version, latest version, description, and reasons for installation.",details:`
      This command retrieves information about installed packages in your project.
      It displays the package name, current version, latest available version, a brief description, and the packages that depend on it (why it's installed).

      The 'why' information might not be perfect due to various resolution strategies, but it offers insights into dependency chains.
    `,examples:[["yarn inspect","Generates HTML report information for all installed packages"]]})}async execute(){let n=await $.Configuration.find(this.context.cwd,this.context.plugins),{project:t,workspace:i}=await $.Project.find(n,this.context.cwd);return await t.restoreInstallState(),(await $.StreamReport.start({configuration:n,stdout:this.context.stdout},async u=>{u.reportInfo($.MessageName.UNNAMED,"Generating report...");let c=new gr({showLatest:this.show_latest,showVulnerability:this.show_vulnerability,showAll:this.all,silent:this.silent,outputDir:this.output}),{packages:l,topLevelDependencies:h}=await c.runner(t,n,u,i);await c.createReport(Te(Q(kr),l),h,t.cwd,n,u)})).exitCode()}};var lu={hooks:{},commands:[Fe]},au=lu;return Ut(fu);})();
return plugin;
}
};
